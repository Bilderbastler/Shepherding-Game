package MapElements {	import Audio.Sounds;		import Characters.Dog;	import Characters.Sheep;		import Events.*;		import flash.display.MovieClip;	import flash.events.Event;	
	/**	 * @author neumeister	 */	public class Map extends MovieClip {				// der Hund		private var dog:Dog;				// die Schafe		private var sheeps:Array;		// die Schärmaschine		private var machine:Machine;						// die Hindernisse des Levels		private var obstacles:Array;				// Die Sound-Engine		private var sounds:Sounds;				public function Map(level:uint) {						// wähle das Level aus. 			gotoAndStop(level);									this.sheeps =  new Array;			this.obstacles = new Array();						// gehe alle Anzeigeobjekte durch und ordne sie entsprechend zu			for (var i : int = 0; i < this.numChildren; i++) {								if(this.getChildAt(i) is Obstacle) {					this.obstacles.push(Obstacle(this.getChildAt(i)));					if(this.getChildAt(i) is Machine) {						this.machine = Machine(this.getChildAt(i));					}				}else if (this.getChildAt(i) is Sheep) {					this.sheeps.push(Sheep(this.getChildAt(i)));				}else if (this.getChildAt(i) is Dog) {					this.dog = Dog(this.getChildAt(i));				}			}						// hole Instanz der Sound-Engine			this.sounds = Sounds.getInstance();						// beginne den Hintergrund-Sound zu spielen:			sounds.Nature();		}			public function getDog():Dog {			return dog;		}				public function getSheeps() : Array {			return sheeps;		}				public function getObstacles(): Array {			return obstacles;		}				// entfernt ein Schaf und herhöht die Punktezahl		public function shaveSheep(e:SheepEvent):void {						//entferne Schaf			killSheep(e);									// werfe ein Ereignis für die Änderung der PUnkte			this.dispatchEvent(new GameEvent(GameEvent.NEW_POINTS, 1));						// spiele den MaschinenSound ab			sounds.Maschine();		}						// entfernt ein Schaf und prüft dann ob das Spiel zu ende ist		public function killSheep(e:SheepEvent):void {			// entfernt das Schaf			var sheep:Sheep = sheeps[e.sheepIndex];			sheep.stopAnimal();			this.removeChild(sheep);			sheeps.splice(e.sheepIndex,1);						// löst das Spielende aus, wenn keine Schafe mehr da sind						if (sheeps.length == 0) {				this.dispatchEvent(new Event("NO_MORE_SHEEP",true,false));			}		}				// entfernt allen Inhalt von der Karte und gibt den Speicher frei		public function destroyMap():void{			//halte alle Tiere an			for each(var sheep:Sheep in sheeps){				sheep.stopAnimal();				sheep.destroyAnimal();			}			dog.stopAnimal();			dog.destroyAnimal();			//entferne alle Elemte von der Karte			while(this.numChildren > 0){				this.removeChildAt(0);			}			// lösche alle Klassen-Variablen			dog = null;			sheeps = null;			machine = null;			obstacles = null;			sounds = null;				}	}}